<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ç‡ƒè²»è¨ˆç®—ãƒ„ãƒ¼ãƒ«</title>
<style>
:root {
    --main: #7b9cff;
    --main-dark: #4a6cf7;
    --bg: #f7f8fc;
    --bg-dark: #1e1f25;
    --text: #2a2a2a;
    --text-dark: #e8e8e8;
    --input-bg: #ffffff;
    --input-bg-dark: #2b2d34;
    --card-bg: #ffffff;
    --card-bg-dark: #2d2f36;
    --radius: 16px;
    --shadow: 0 8px 28px rgba(0, 0, 0, 0.12);
}
body {
    font-family: 'Segoe UI', sans-serif;
    margin: 0;
    padding: 0;
    background: linear-gradient(180deg, #ffffff 0%, var(--bg) 100%);
    transition: 0.4s ease;
}
.header {
    background: var(--main);
    padding: 26px;
    text-align: center;
    color: white;
    font-size: 26px;
    font-weight: 700;
    letter-spacing: 1px;
    box-shadow: var(--shadow);
    position: relative;
}
body.dark { background: var(--bg-dark); color: var(--text-dark); }
body.dark .container { background: var(--card-bg-dark); }
body.dark input { background: var(--input-bg-dark); border-color: #555; color: var(--text-dark); }
body.dark .header { background: var(--main-dark); }
body.dark .result { background: #39405a; border-left-color: #9cb3ff; color: #eaefff; }
body.dark button { background: var(--main-dark); }
body.dark label { color: #dcdcdc; }
.theme-toggle {
    position: absolute;
    right: 22px;
    top: 22px;
    background: rgba(255,255,255,0.3);
    padding: 8px 14px;
    border-radius: 50px;
    cursor: pointer;
    font-size: 14px;
    transition: 0.3s;
    color: #fff;
}
.theme-toggle:hover { background: rgba(255,255,255,0.45); }
.container {
    max-width: 520px;
    margin: 40px auto;
    padding: 30px;
    background: var(--card-bg);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    animation: fadeIn 0.6s ease;
}
label {
    display: block;
    margin-top: 18px;
    font-size: 14px;
    font-weight: 700;
    color: #555;
}
input {
    width: 100%;
    padding: 14px 18px;
    margin-top: 6px;
    border: 1px solid #dcdfea;
    border-radius: 40px;
    font-size: 17px;
    transition: 0.25s ease;
    background: var(--input-bg);
}
button {
    width: 100%;
    margin-top: 30px;
    padding: 15px;
    background: var(--main);
    color: white;
    border: none;
    font-size: 18px;
    border-radius: 40px;
    cursor: pointer;
    transition: 0.25s ease;
    font-weight: 600;
}
button:hover { transform: translateY(-3px); box-shadow: 0 8px 18px rgba(74,108,247,0.3); }
.result {
    margin-top: 30px;
    padding: 20px;
    background: #eef3ff;
    border-left: 6px solid var(--main);
    border-radius: var(--radius);
    font-size: 18px;
    font-weight: 600;
    color: #1e2c5a;
}
.reset-btn {
    background: #ff7b7b;
    margin-top: 12px;
}
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px);} to { opacity: 1; transform: translateY(0);} }
</style>
</head>
<body>
<div class="header">ç‡ƒè²»è¨ˆç®—ãƒ„ãƒ¼ãƒ« <div class="theme-toggle" onclick="toggleTheme()">ğŸŒ™</div></div>
<div class="container">
    <label>èµ°è¡Œè·é›¢ï¼ˆkmï¼‰</label>
    <input type="number" id="distance" placeholder="ä¾‹ï¼š120">

    <label>ç‡ƒè²»ï¼ˆkm/Lï¼‰</label>
    <input type="number" id="fuelEconomy" placeholder="ä¾‹ï¼š15">

    <label>ã‚¬ã‚½ãƒªãƒ³ä¾¡æ ¼ï¼ˆå††/Lï¼‰</label>
    <input type="number" id="gasPrice" placeholder="ä¾‹ï¼š170">

    <label>å‰²ã‚Šå‹˜äººæ•°ï¼ˆä»»æ„ï¼‰</label>
    <input type="number" id="people" placeholder="ä¾‹ï¼š3">

    <label>å¾€å¾©ï¼ˆãƒã‚§ãƒƒã‚¯ã§å¾€å¾©è¨ˆç®—ï¼‰</label>
    <input type="checkbox" id="roundTrip" style="width:auto; margin-top:10px;">

    <button onclick="calc()">è¨ˆç®—ã™ã‚‹</button>
    <button class="reset-btn" onclick="resetAll()">ãƒªã‚»ãƒƒãƒˆ</button>

    <div id="result" class="result" style="display:none;"></div>
</div>
<footer>Â© 2025 Nenpi Calculator</footer>
<script>
window.onload = function () {
    const keys = ["distance","fuelEconomy","gasPrice","people","roundTrip"];
    keys.forEach(k=>{
        let v = localStorage.getItem(k);
        if(v !== null){
            if(k === "roundTrip"){ document.getElementById(k).checked = (v === "true"); }
            else { document.getElementById(k).value = v; }
        }
    });
    const savedTheme = localStorage.getItem("theme");
    const systemPrefDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
    if (savedTheme === "dark" || (!savedTheme && systemPrefDark)) {
        document.body.classList.add("dark");
        document.querySelector(".theme-toggle").innerHTML = "â˜€ï¸";
    } else {
        document.querySelector(".theme-toggle").innerHTML = "ğŸŒ™";
    }
};
function saveInput() {
    localStorage.setItem("distance", document.getElementById("distance").value);
    localStorage.setItem("fuelEconomy", document.getElementById("fuelEconomy").value);
    localStorage.setItem("gasPrice", document.getElementById("gasPrice").value);
    localStorage.setItem("people", document.getElementById("people").value);
    localStorage.setItem("roundTrip", document.getElementById("roundTrip").checked);
}
function calc() {
    const d = parseFloat(document.getElementById("distance").value);
    const e = parseFloat(document.getElementById("fuelEconomy").value);
    const p = parseFloat(document.getElementById("gasPrice").value);
    const people = parseFloat(document.getElementById("people").value);
    const round = document.getElementById("roundTrip").checked;

    if (isNaN(d) || isNaN(e) || isNaN(p) || d <= 0 || e <= 0 || p <= 0) {
        alert("ã™ã¹ã¦ã®å€¤ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
        return;
    }
    const distanceFinal = round ? d * 2 : d;
    const fuel = distanceFinal / e;
    const cost = Math.round(fuel * p);

    let resultText = `èµ°è¡Œè·é›¢ï¼š${distanceFinal} km<br>å¿…è¦ãªã‚¬ã‚½ãƒªãƒ³é‡ï¼š${fuel.toFixed(2)} L<br>ã‚¬ã‚½ãƒªãƒ³ä»£ï¼š<strong>${cost} å††</strong>`;
    if (!isNaN(people) && people > 0) {
        const per = Math.round(cost / people);
        resultText += `<br><br>1äººã‚ãŸã‚Šï¼š<strong>${per} å††</strong>`;
    }
    const result = document.getElementById("result");
    result.style.display = "block";
    result.innerHTML = resultText;
    saveInput();
}
function resetAll() {
    document.getElementById("distance").value = "";
    document.getElementById("fuelEconomy").value = "";
    document.getElementById("gasPrice").value = "";
    document.getElementById("people").value = "";
    document.getElementById("roundTrip").checked = false;
    document.getElementById("result").style.display = "none";
    localStorage.clear();
}
function toggleTheme() {
    const isDark = document.body.classList.toggle("dark");
    document.querySelector(".theme-toggle").innerHTML = isDark ? "â˜€ï¸" : "ğŸŒ™";
    localStorage.setItem("theme", isDark ? "dark" : "light");
}
</script>
</body>
</html>
